{% extends "base.html" %}
{% block content %}
<h3>Leave Requests</h3>
<table class="table table-striped">
  <thead><tr><th>Applicant</th><th>From</th><th>To</th><th>Status</th><th>Reason</th><th>Action</th></tr></thead>
  <tbody>
    {% for x in items %}
      <tr>
        <td>{{ x.applicant.username }} ({{ x.applicant.role }})</td>
        <td>{{ x.from_date }}</td>
        <td>{{ x.to_date }}</td>
        <td>{{ x.status }}</td>
        <td class="small">{{ x.reason }}</td>
        <td>
          {% if x.status == 'pending' and user.role == 'admin' %}
            <a class="btn btn-sm btn-success" href="{% url 'adminpanel:leave_review_action' x.id 'approved' %}">Approve</a>
            <a class="btn btn-sm btn-danger" href="{% url 'adminpanel:leave_review_action' x.id 'rejected' %}">Reject</a>
          {% else %}
            â€”
          {% endif %}
        </td>
      </tr>
    {% empty %}
      <tr><td colspan="6" class="text-muted">No leave requests.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
